jQuery(document).ready(function () {    window.salesDT = null;    let dtActionsHTML = '<a href="' + getAppURL('orders/edit/') + '%d" class="btn bt-link btn-sm" title="Edit"><i style="color:#282828;" class="fas fa-edit"></i></a>' +        '<a href="#" data-id="%d"\n' + '                                               data-action="orders/delete"\n' + '                                               class="btn bt-link btn-sm deleteBtn" title="Delete">\n' + '                                                <i class="fas fa-trash"></i>\n' + '                                            </a>' +        // '<a href="' + getAppURL('orders/missing_products/') + '%d" class="btn bt-link btn-sm" title="Missing Products"><i style="color:#282828;" class="glyphicon glyphicon-edit"></i></a>' +        '<a href="' + getAppURL('orders/to_invoice/') + '%d" class="btn bt-link btn-sm" title="To Invoice"><i style="color:#282828;" class="fas fa-check"></i></a>' +        '<a href="' + getAppURL('accounts/customer_info_preview/') + '%d" class="btn bt-link btn-sm" title="Customer Info"><i style="color:#282828;" class="fas fa-user" ></i></a>'        + '<a href="' + getAppURL('orders/view/') + '%d" class="btn bt-link btn-sm" title="View"><i style="color:#282828;" class="fas fa-info-circle" ></i></a>' +        '<a href="' + getAppURL('orders/preview/') + '%d" class="btn bt-link btn-sm" title="Print"><i style="color:#282828;" class="fas fa-file" ></i></a>';    let statusHTML = '<input name="status" type="checkbox" id="status" class="input.i-status" onclick="return changeStatusList();" %s>';    let pickupHTML = '<input name="pickup" type="checkbox" id="pickup" class="input.i-pickup" onclick="return changePickupList();" %s>';    /***************************************************/    var $dtTbl = $('#ordersTbl');    BuildDataTableColumnSearch($dtTbl, 'salesDT');    EnhanceDataTableSearch(window.salesDT = $dtTbl.DataTable({        orderCellsTop: true, fixedHeader: {headerOffset: 0}, searchDelay: _GST, lengthMenu: _dtLengthMenu,        serverSide: true, processing: true, scrollX: false, scrollY: false, deferLoading: $dtTbl.attr('data-num-rows'),        order: [[0, 'asc']], ajax: {            url: getAppURL('orders/index'), type: 'GET', searchDelay: _GST,            complete: function () {                check_transfered();            }        },        initComplete: function () {            var api = this.api();            api.column(13).visible(false);        },        columns: [{data: 'auto_no'}, {data: 'qu_no'}, {data: 'trans_date'}, {data: 'account1'}, {data: 'model'}, {data: 'VIN'},            {data: 'OE'}, {data: 'description'}, {data: 'user_name'}, {data: 'total'}, {data: 'status'}, {data: 'pickup'}, {data: 'id'}, {data: 'transfered'}],        columnDefs: [            {                targets: 12,                orderable: false,                createdCell: (td, accId) => $(td).addClass('text-right').html(dtActionsHTML.replace(/%d/g, parseInt(accId)))            },            {                targets: 11,                orderable: false,                createdCell: (td, status) => $(td).addClass('text-right').html(statusHTML.replace(/%s/g, status_check(status)))            },            {                targets: 10,                orderable: false,                createdCell: (td, pickup) => $(td).addClass('text-right').html(pickupHTML.replace(/%s/g, pickup_check(pickup)))            },            {targets: 2, render: $.fn.dataTable.render.moment('YYYY-MM-DD', 'DD-MM-YYYY')}            , {                defaultContent: "-", targets: "_all"            }        ],        /*pagingType: "input",*/       stateSave: true,        stateSaveCallback: function (settings, data) {            localStorage.setItem('DataTables_' + settings.sInstance, JSON.stringify(data))        },        stateLoadCallback: function (settings) {            return JSON.parse(localStorage.getItem('DataTables_' + settings.sInstance))        },        "stateSaveParams": function (settings, data) {            var temp = {};            $('#ordersTbl thead').find("tr:eq(1)").find('input').each(function (n) {                $(this).attr('id', 'input_' + n);                temp[$(this).attr('placeholder')] = document.getElementById($(this).attr('id')).value;            });            data.colsFilter = temp;            console.log(temp);        },        "stateLoadParams": function (settings, data) {            $.each(data.colsFilter, function (key, val) {                $('#ordersTbl thead input[placeholder="' + key + '"]').val(val);            });        },        "stateLoaded": function (settings, data) {            $('#ordersTbl').DataTable().ajax.reload();        }    }), 2048);    $('#reset_filters').on('click', function (e) {        location.reload();    });    check_transfered();});function status_check(status) {    if (parseInt(status) === 1) {        return 'checked';    } else {        return '';    }}function pickup_check(pickup) {    if (parseInt(pickup) === 1) {        return 'checked';    } else {        return '';    }}/*function getAllStatusTdCells() {    const table = document.getElementById('ordersTbl');    const rows = table.getElementsByTagName('tr');    for (const element of rows) {        const cells = element.getElementsByTagName('td');        if (cells[11]) {            const statusOnTable = cells[11].innerHTML;            const checkbox = document.createElement('input');            checkbox.type = 'checkbox';            checkbox.name = 'status';            checkbox.onclick = function () {                const itemId = cells[11].getAttribute('data-id');                if (parseInt(itemId)) {                    changeStatusList(itemId);                }            };            if (parseInt(statusOnTable) === 1) {                checkbox.checked = true;            } else if (parseInt(statusOnTable) === 0) {                checkbox.checked = false;            } else {                checkbox.checked = false;            }            cells[11].textContent = '';            cells[11].appendChild(checkbox);        } else {            console.log('not  found!');        }    }}function getAllPickedTdCells() {    const table = document.getElementById('ordersTbl');    const rows = table.getElementsByTagName('tr');    for (const element of rows) {        const cells = element.getElementsByTagName('td');        if (cells[10]) {            const statusOnTable = cells[10].innerHTML;            const checkbox = document.createElement('input');            checkbox.type = 'checkbox';            checkbox.name = 'pickup';            checkbox.onclick = function () {                const itemId = cells[10].getAttribute('data-id');                if (parseInt(itemId)) {                    changePickupList(itemId);                }            };            if (parseInt(statusOnTable) === 1) {                checkbox.checked = true;            } else if (parseInt(statusOnTable) === 0) {                checkbox.checked = false;            } else {                checkbox.checked = false;            }            cells[10].textContent = '';            cells[10].appendChild(checkbox);        } else {            console.log('not  found!');        }    }}*/function check_transfered() {    $("#ordersTbl tbody tr").each(function () {        var data = $('#ordersTbl').DataTable().row($(this)).data();        if (data) {            if (data['transfered'] === '1') {                $(this).css('background-color', '#bbd4fc');            }        }    });}function changeStatusView() {    var itemId = $("#transId").val();    $.ajax({        url: 'orders/change_status', type: 'POST', data: {itemId: itemId}, success: function (response) {            // Handle the response from the server            window.location.reload();        }    });}function changeStatusList() {    let table = $('#ordersTbl').DataTable();    $('#ordersTbl tbody').on('click', 'tr', function () {        let rowData = table.row(this).data();        var itemId = rowData.id;        $.ajax({            url: 'sales/change_status', type: 'POST', data: {itemId: itemId}, success: function (response) {                // Handle the response from the server                table.ajax.reload();                window.location.reload();            }        });    });}function changePickupList() {    let table = $('#ordersTbl').DataTable();    $('#ordersTbl tbody').on('click', 'tr', function () {        let rowData = table.row(this).data();        var itemId = rowData.id;        $.ajax({            url: 'sales/change_pickup', type: 'POST', data: {itemId: itemId}, success: function (response) {                // Handle the response from the server                table.ajax.reload();                window.location.reload();            }        });    });}