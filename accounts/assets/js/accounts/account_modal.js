var $input;$(document).ready(function () {    var getselected = $("#account_type option:selected").text();    $.ajax({        cache: false,        type: 'POST',        data: { 'whatselected': getselected },        url: getAppURL('Accounts/fetchaccountnumberfromDatabase'),        success: function (data) {            $('#account_number').val(data);        }    });    $('#account_type').change(function (e) {        var getselected = $("#account_type option:selected").text();        $.ajax({            cache: false,            type: 'POST',            data: { 'whatselected': getselected },            url: getAppURL('Accounts/fetchaccountnumberfromDatabase'),            success: function (data) {                $('#account_number').val(data);            }        });    });    $('#save_acc').on('click', function () {        $("#accountForm").each(function () {            $input = $(this).serializeArray();        });        var acc_number = $("#account_number").val();        var acc_name = $("#account_name").val();        var account_info = acc_number + " - " + acc_name;        if (AccountModalValidation() == true) {            $.ajax({                cache: false,                type: 'POST',                data: { 'form_data': $input },                url: getAppURL('Accounts/add_edit_account_by_modal'),                success: function (data) {                    $("#acctLkupTo").val(account_info);                    $.ajax({                        cache: false,                        type: 'POST',                        data: { 'account_number': acc_number },                        url: getAppURL('Accounts/get_account_id'),                        success: function (data) {                            $("#account_id").val(data);                            var id = data;                            $.ajax({                                cache: false,                                type: 'POST',                                data: { 'whatselected': id },                                url: getAppURL('purchases/get_account_currency'),                                success: function (data) {                                    $('#currency_id_list').val(data);                                    $('#currency_id').val(data);                                    $.ajax({                                        cache: false,                                        type: 'POST',                                        data: { 'whatselected': data },                                        url: getAppURL('sales/get_sales_account_with_the_same_currency'),                                        success: function (data) {                                            $('#acctLkupFrom').val(JSON.stringify(data["description"]).replace(/"/g, ""));                                            $('#account2_id').val(JSON.stringify(data["id"]).replace(/"/g, ""));                                        }                                    });                                    $.ajax({                                        cache: false,                                        type: 'POST',                                        data: { 'whatselected': data },                                        url: getAppURL('currencies/get_currency_rate'),                                        success: function (data) {                                            var result = data.split('-');                                            var cur_rate = result[0];                                            var cur_read = result[1];                                            $('#currency_id_list').prop('disabled', true).trigger("chosen:updated");                                            $('#currency_rate').val(cur_rate);                                            if (cur_read == "readonly") {                                                document.getElementById('currency_rate').setAttribute("readonly", true);                                            } else {                                                document.getElementById('currency_rate').removeAttribute("readonly");                                            }                                        }                                    });                                }                            });                        }                    });                    setTimeout(() => $('div#AccountFormModal').modal('hide'), 1000);                }            });        }    });    let $body = jQuery('div.modal-body', $('div#AccountFormModal'));    inputToDatepickerA($('#opening_date', $body));    $('#edit_acc_modal').on('click', function () {        if ($('#account_id').val() != '') {            $.ajax({                cache: false,                type: 'POST',                data: { 'acc_id': $('#account_id').val() },                url: getAppURL('Accounts/get_account_edit_modal_data'),                success: function (data) {                    // alert(data.opening_date);                    // jQuery('div.modal-body', $('div#AccountFormModal'))                             $("#accModalLabel").html("Edit Account");                    $("#acc_id").val(data.id);                    $("#account_type").val(data.account_type);                    $("#account_number").val(data.account_number);                    $("#account_name").val(data.account_name);                    $("#acc_currency_id").val(data.currency_id);                    var datearray = (data.opening_date).split("-");                    var new_date_format = datearray[2] + "-" + datearray[1] + "-" + datearray[0]                    $("#opening_date").val(new_date_format);                    $("#phone").val(data.phone);                    $("#email").val(data.email);                    $("#address").val(data.address);                    $("#open_balance").val(data.open_balance);                    $('div#AccountFormModal').modal('show');                }            });        }    });    $('#add_acc_modal').on('click', function () {        $("#accModalLabel").html("Add Account");        $("#acc_id").val('');        $("#account_type").val('Customer');        var getselected = $("#account_type option:selected").text();        $.ajax({            cache: false,            type: 'POST',            data: { 'whatselected': getselected },            url: getAppURL('Accounts/fetchaccountnumberfromDatabase'),            success: function (data) {                $('#account_number').val(data);            }        });        $("#account_name").val('');        $("#acc_currency_id").val('');        var today = new Date();        var dd = String(today.getDate()).padStart(2, '0');        var mm = String(today.getMonth() + 1).padStart(2, '0');        var yyyy = today.getFullYear();        today = dd + '-' + mm + '-' + yyyy;        $("#opening_date").val(today);        $("#phone").val('');        $("#email").val('');        $("#address").val('');        $("#open_balance").val(0);        $('div#AccountFormModal').modal('show');    });});function AccountModalValidation() {    var count = 0;    if ($('#acc_currency_id').val() == "") {        document.getElementById('error_acc_currency_id').innerHTML = "*Please select a cuurency*";        document.getElementById('error_acc_currency_id').className = "alert alert-danger";        count++;    }    var date1 = change_date_format(document.accountForm.opening_date.value);    if (document.accountForm.opening_date.value == "" || isNaN(date1.getDate())) {        document.getElementById('error_date').innerHTML = "*Please enter a valide date*";        document.getElementById('error_date').className = "alert alert-danger";        count++;    }    if (count > 0) {        return false;    } else {        return true;    }}function change_date_format(date) {    var datearray = date.split("-");    var new_date_format = datearray[1] + "/" + datearray[0] + "/" + datearray[2]    var date_new = new Date(new_date_format);    return date_new;}