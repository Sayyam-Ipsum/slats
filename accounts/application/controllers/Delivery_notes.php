<?phpdefined('BASEPATH') or die('No direct script access allowed');/** * @property Account $Account * @property Currency $Currency * @property Item $Item * @property Transaction $Transaction */class Delivery_notes extends MY_Controller{	public $Transaction = NULL;	public function __construct()	{		parent::__construct();		$this->pageTitle = $this->lang->line('delivery_notes');		$this->load->model('Transaction');	}	public function index()	{		if ($this->input->is_ajax_request()) {			$this->_render_json($this->Transaction->load_delivery_note_data_tables(Transaction::SaleTransType, false));		} else {			$this->pageTitle = $this->lang->line('delivery_note');			$this->load->model('Transaction_item');						$data['records'] = $this->Transaction->paginate_delivery_note();			$this->load->view('templates/header', [				'_page_title' => "Delivery Note",				'_moreCss' => ['css/dataTables.bootstrap.min', 'css/fixedHeader.dataTables.min']			]);			$this->load->view('delivery_notes/index', $data);			$this->load->view('templates/footer', ['_moreJs' => ['jquery.dataTables.min', 'dataTables.bootstrap.min', 'delivery_notes/index']]);		}	}	public function preview($id){		$this->load->model('Account');		$this->load->model('Transaction_item');		$this->load->model('Configuration');		$this->load->model('Currency');		$data['trans'] = $this->Transaction->load_trans_data_by_trans_id($id);		$data['customer_info']= $data['trans'] ? $this->Account->fetch_account_info($data['trans']["account_id"]) : null;		$data['trans_items'] = $this->Transaction_item->load_all_trans_items($id);		$data['company_name'] = $this->Configuration->fetch_company_name()["valueStr"];		$data['company_address'] = $this->Configuration->fetch_company_address()["valueStr"];		$data['company_phone'] = $this->Configuration->fetch_company_phone()["valueStr"];		$data['company_email'] = $this->Configuration->fetch_company_email()["valueStr"];		$data['company_website'] = $this->Configuration->fetch_company_website()["valueStr"];		$data['currency']= $data['trans'] ? $this->Currency->fetch_currency_code($data['trans']["currency_id"])["currency_code"] : null;		$this->load->view('templates/header', [			'_moreCss' => ['js/air-datepicker/css/datepicker.min'],			'_page_title' => "Delivery Note"		]);		$this->load->view('delivery_notes/delivery_note', $data);		$this->load->view('templates/footer', [			'_moreJs' => [				'air-datepicker/js/datepicker.min', 'air-datepicker/js/i18n/datepicker.en',				'jquery.autocomplete.min', 'delivery_notes/preview', 			]		]);		}}